{"ast":null,"code":"var _jsxFileName = \"/Users/frank/code/TOP/repos/sites/setlist/client/src/views/home.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from '../styles/home.module.css';\nimport Searchbar from '../components/searchbar/searchbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  let redirect_uri = 'http://127.0.0.1:8080/test.html';\n  let access_token;\n  let refresh_token;\n  const client_id = '0d453f304c284edca80fef86ba63f57c';\n  const client_secret = 'd4a0686ea42f418a92521bd7e884d221';\n  const TOKEN = \"https://accounts.spotify.com/api/token\";\n  const AUTHORIZE = \"https://accounts.spotify.com/authorize\";\n\n  // document.addEventListener(\"DOMContentLoaded\", () => {\n  //   console.log('Page Loaded');\n  //   onPageLoad()\n  // });\n\n  useEffet(() => {}, []);\n  let button = document.getElementById('myButton');\n  button.addEventListener('click', () => {\n    console.log('Requesting Auth');\n    requestAuthorization();\n  });\n  function requestAuthorization() {\n    let url = AUTHORIZE;\n    url += \"?client_id=\" + client_id;\n    url += \"&response_type=code\";\n    url += \"&redirect_uri=\" + encodeURI(redirect_uri);\n    url += \"&show_dialog=true\";\n    url += \"&scope=user-read-private user-read-private playlist-modify-private playlist-modify-public\";\n    window.location.href = url; // Show Spotify's authorization screen\n  }\n\n  function onPageLoad() {\n    if (window.location.search.length > 0) {\n      handleRedirect();\n    }\n  }\n  function handleRedirect() {\n    let code = getCode();\n    fetchAccessToken(code);\n  }\n  function getCode() {\n    let code = null;\n    const queryString = window.location.search;\n    if (queryString.length > 0) {\n      const urlParams = new URLSearchParams(queryString);\n      code = urlParams.get('code');\n    }\n    return code;\n  }\n  function fetchAccessToken(code) {\n    let body = \"grant_type=authorization_code\";\n    body += \"&code=\" + code;\n    body += \"&redirect_uri=\" + encodeURI(redirect_uri);\n    body += \"&client_id=\" + client_id;\n    body += \"&client_secret=\" + client_secret;\n    callAuthorizationApi(body);\n  }\n  function callAuthorizationApi(body) {\n    let xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", TOKEN, true);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.setRequestHeader('Authorization', 'Basic ' + btoa(client_id + \":\" + client_secret));\n    xhr.send(body);\n    xhr.onload = handleAuthorizationResponse;\n  }\n  function handleAuthorizationResponse() {\n    if (this.status === 200) {\n      console.log('YAYYYY 200');\n      var data = JSON.parse(this.responseText);\n      console.log(data);\n      access_token = data.access_token;\n      refresh_token = data.refresh_token;\n      console.log(access_token);\n      console.log(refresh_token);\n      // onPageLoad();\n    } else {\n      console.log(this.responseText);\n      alert(this.responseText);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.home,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Instantly create a Spotify playlist from any setlist!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" All you have to do is paste the link from setlist.fm, we look after the rest.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.searchbar,\n      children: /*#__PURE__*/_jsxDEV(Searchbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: \"Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/about\",\n      children: \"About\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"4lMEXbnawqyKLoqoahSMXKnrK5c=\", true);\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","Link","styles","Searchbar","Home","redirect_uri","access_token","refresh_token","client_id","client_secret","TOKEN","AUTHORIZE","useEffet","button","document","getElementById","addEventListener","console","log","requestAuthorization","url","encodeURI","window","location","href","onPageLoad","search","length","handleRedirect","code","getCode","fetchAccessToken","queryString","urlParams","URLSearchParams","get","body","callAuthorizationApi","xhr","XMLHttpRequest","open","setRequestHeader","btoa","send","onload","handleAuthorizationResponse","status","data","JSON","parse","responseText","alert","home","header","searchbar"],"sources":["/Users/frank/code/TOP/repos/sites/setlist/client/src/views/home.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from '../styles/home.module.css';\nimport Searchbar from '../components/searchbar/searchbar';\n\nconst Home = () => {\n\n  let redirect_uri = 'http://127.0.0.1:8080/test.html';\n\n  let access_token;\n  let refresh_token;\n  const client_id = '0d453f304c284edca80fef86ba63f57c';\n  const client_secret = 'd4a0686ea42f418a92521bd7e884d221';\n\n  const TOKEN = \"https://accounts.spotify.com/api/token\";\n  const AUTHORIZE = \"https://accounts.spotify.com/authorize\";\n\n  // document.addEventListener(\"DOMContentLoaded\", () => {\n  //   console.log('Page Loaded');\n  //   onPageLoad()\n  // });\n\n  useEffet(() => {\n\n  }, [])\n\n  let button = document.getElementById('myButton');\n  button.addEventListener('click', () => {\n    console.log('Requesting Auth');\n    requestAuthorization();\n  })\n\n  function requestAuthorization(){\n    let url = AUTHORIZE;\n    url += \"?client_id=\" + client_id;\n    url += \"&response_type=code\";\n    url += \"&redirect_uri=\" + encodeURI(redirect_uri);\n    url += \"&show_dialog=true\";\n    url += \"&scope=user-read-private user-read-private playlist-modify-private playlist-modify-public\";\n    window.location.href = url; // Show Spotify's authorization screen\n  }\n\n  function onPageLoad() {\n    if (window.location.search.length > 0) {\n      handleRedirect();\n    }\n  }\n\n  function handleRedirect() {\n    let code = getCode();\n    fetchAccessToken(code);\n  }\n\n  function getCode() {\n    let code = null;\n    const queryString = window.location.search;\n    if (queryString.length > 0) {\n      const urlParams = new URLSearchParams(queryString);\n      code = urlParams.get('code');\n    }\n    return code;\n  }\n\n  function fetchAccessToken(code) {\n    let body = \"grant_type=authorization_code\";\n    body += \"&code=\" + code;\n    body += \"&redirect_uri=\" + encodeURI(redirect_uri);\n    body += \"&client_id=\" + client_id;\n    body += \"&client_secret=\" + client_secret;\n    callAuthorizationApi(body);\n  }\n\n  function callAuthorizationApi(body){\n    let xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", TOKEN, true);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.setRequestHeader('Authorization', 'Basic ' + btoa(client_id + \":\" + client_secret));\n    xhr.send(body);\n    xhr.onload = handleAuthorizationResponse;\n  }\n\n  function handleAuthorizationResponse(){\n    if (this.status === 200) {\n      console.log('YAYYYY 200');\n      var data = JSON.parse(this.responseText);\n      console.log(data);\n      access_token = data.access_token;\n      refresh_token = data.refresh_token;\n      console.log(access_token);\n      console.log(refresh_token);\n      // onPageLoad();\n    }\n    else {\n      console.log(this.responseText);\n      alert(this.responseText);\n    }\n  }\n\n\n  return (\n    <div className={styles.home}>\n      <div className={styles.header}>\n        <h2>Instantly create a Spotify playlist from any setlist!</h2>\n        <span> All you have to do is paste the link from setlist.fm, we look after the rest.</span>\n      </div>\n      <div className={styles.searchbar}>\n        <Searchbar />\n      </div>\n      <Link to=\"/\">Home</Link>\n      <Link to=\"/about\">About</Link>\n    </div>\n  )\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}