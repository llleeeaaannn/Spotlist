{"ast":null,"code":"import _regeneratorRuntime from\"/Users/frank/code/TOP/repos/sites/setlist/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/frank/code/TOP/repos/sites/setlist/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect,useContext}from'react';import{useNavigate}from'react-router-dom';import styles from'../styles/home.module.css';import Searchbar from'../components/searchbar/searchbar';import{AppContext}from'../App.js';import{parseSetlistLink,getNowTime}from'../methods/methods.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useContext=useContext(AppContext),setPlaylistID=_useContext.setPlaylistID,setPlaylistLink=_useContext.setPlaylistLink,setUnfoundSongs=_useContext.setUnfoundSongs,setCoverSongs=_useContext.setCoverSongs,setCreatingPlaylist=_useContext.setCreatingPlaylist,playlistName=_useContext.playlistName,setPlaylistName=_useContext.setPlaylistName,playlistDescription=_useContext.playlistDescription,setPlaylistDescription=_useContext.setPlaylistDescription,setAuthenticated=_useContext.setAuthenticated,setAuthenticating=_useContext.setAuthenticating,setSetlistError=_useContext.setSetlistError,authError=_useContext.authError,setAuthError=_useContext.setAuthError;var accessToken;var refreshToken;var redirectURL='http://localhost:3000';var regex=new RegExp('.*setlist\\.fm.*');var TOKEN=\"https://accounts.spotify.com/api/token\";var navigate=useNavigate();useEffect(function(){checkForAccessToken();onPageLoad();},[]);function checkForAccessToken(){var access=localStorage.getItem('access');if(access===null)return setAuthenticated(false);var accessJSON=JSON.parse(access);if(accessJSON.expiry>getNowTime()){accessToken=accessJSON.value;setAuthenticated(true);}else{setAuthenticated(false);}}function checkAccessTokenExists(){var access=localStorage.getItem('access');// If accessToken not stored, return false\nif(access===null){setAuthenticated(false);return false;}// Parse object in localStorage to JSON\nvar accessJSON=JSON.parse(access);// If accessToken has expired, return false\nif(accessJSON.expiry<getNowTime()){setAuthenticated(false);return false;}// If accessToken value is falsy, return false\nif(!accessJSON.value){setAuthenticated(false);return false;}// If above conditions not met, accessToken is valid. Set it and return true\naccessToken=accessJSON.value;setAuthenticated(true);return true;}function requestAuthLink(){return _requestAuthLink.apply(this,arguments);}function _requestAuthLink(){_requestAuthLink=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,json,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:4000/auth');case 3:data=_context.sent;_context.next=6;return data.json();case 6:json=_context.sent;url=json.auth;window.location.href=url;// Show Spotify's authorization screen\n_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setAuthError('Unable to connect to Spotify, please try again!');case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _requestAuthLink.apply(this,arguments);}function onPageLoad(){if(window.location.search.length>0){handleRedirect();}}function handleRedirect(){if(!verifyAuthorisation()){setAuthError('Spotify account not connected, please try again!');setAuthenticating(false);setAuthenticated(false);navigate('/');return;}setAuthError('');setSetlistError('');var code=getCode();navigate('/');setAuthenticating(true);fetchAccessToken(code);}// Function to verify if user granted authorization on Spotify's auth screen.\nfunction verifyAuthorisation(){// Get url query\nvar queryString=window.location.search;// If no query, return false\nif(queryString.length===0)return false;var urlParams=new URLSearchParams(queryString);var error=urlParams.get('error');// If query contains error parameter (user didnt authorise or other error), return false\nif(error)return false;// Otherwise return true\nreturn true;}function getCode(){var code;var queryString=window.location.search;if(queryString.length>0){var urlParams=new URLSearchParams(queryString);code=urlParams.get('code');}return code;}function fetchAccessToken(_x){return _fetchAccessToken.apply(this,arguments);}function _fetchAccessToken(){_fetchAccessToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(code){var data,json,query1,query2,query;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:4000/access');case 2:data=_context2.sent;_context2.next=5;return data.json();case 5:json=_context2.sent;query1=json.query1;query2=json.query2;query=query1+'&code='+code+query2;callAuthorizationApi(query);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchAccessToken.apply(this,arguments);}function callAuthorizationApi(body){var xhr=new XMLHttpRequest();xhr.open(\"POST\",TOKEN,true);xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');xhr.setRequestHeader('Authorization','Basic '+btoa('0d453f304c284edca80fef86ba63f57c'+\":\"+'d4a0686ea42f418a92521bd7e884d221'));xhr.send(body);xhr.onload=handleAuthorizationResponse;}function handleAuthorizationResponse(){if(this.status===200){var data=JSON.parse(this.responseText);var access_token=data.access_token;var refresh_token=data.refresh_token;var expiry=data.expires_in;setAuthenticated(true);setAuthenticating(false);storeAccessToken(access_token,expiry);}else{console.log('Unsucessful Response');console.log(this.responseText);setAuthError('Unable to connect to your Spotify account, please try again');}}function storeAccessToken(key,expiry){var access={value:key,expiry:getNowTime()+(expiry-300)*1000};localStorage.setItem('access',JSON.stringify(access));}function clearPlaylistData(){setPlaylistID();//Not instant\nsetPlaylistLink();//Not instant\nsetUnfoundSongs();//Not instant\nsetCoverSongs();//Not instant\n}function makePlaylistData(setlist){setPlaylistID(setlist.playlistID);//Not instant\nsetPlaylistLink(setlist.playlistLink);//Not instant\nsetUnfoundSongs(setlist.unfoundSongs);//Not instant\nsetCoverSongs(setlist.coverSongs);//Not instant\n}function removeErrors(){setAuthError('');setSetlistError('');}function createPlaylist(_x2){return _createPlaylist.apply(this,arguments);}function _createPlaylist(){_createPlaylist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(url){var setlistID,data,json;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(url.length){_context3.next=2;break;}return _context3.abrupt(\"return\",setSetlistError('No setlist link entered, please try again!'));case 2:if(regex.test(url)){_context3.next=4;break;}return _context3.abrupt(\"return\",setSetlistError('Not a valid setlist.fm link, please try again!'));case 4:if(checkAccessTokenExists()){_context3.next=6;break;}return _context3.abrupt(\"return\",setSetlistError('Your Spotify account is not connected, please try again!'));case 6:setCreatingPlaylist(true);removeErrors();setlistID=parseSetlistLink(url);_context3.prev=9;_context3.next=12;return fetch('http://localhost:4000/setlist',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({setlistID:setlistID,accessToken:accessToken,name:playlistName,description:playlistDescription})});case 12:data=_context3.sent;if(!data.ok){_context3.next=24;break;}_context3.next=16;return data.json();case 16:json=_context3.sent;makePlaylistData(json);navigate('/playlist');setPlaylistName('');setPlaylistDescription('');setCreatingPlaylist(false);_context3.next=26;break;case 24:// Response returned but unsuccesful (playlist not created)\nsetCreatingPlaylist(false);setSetlistError('Unable to create playlist, please ensure your setlist.fm link is correct and try again!');case 26:_context3.next=32;break;case 28:_context3.prev=28;_context3.t0=_context3[\"catch\"](9);// Unable to fetch from backend\nsetCreatingPlaylist(false);setSetlistError('Unable to connect to Spotify, please try again!');case 32:case\"end\":return _context3.stop();}}},_callee3,null,[[9,28]]);}));return _createPlaylist.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.home,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Instantly create a Spotify playlist from any setlist!\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" All you have to do is paste a setlist link from \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.setlist.fm\",className:styles.underline,target:\"_blank\",rel:\"noopener noreferrer\",children:\"setlist.fm\"}),\", we look after the rest.\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.searchbar,children:/*#__PURE__*/_jsx(Searchbar,{requestAuthLink:requestAuthLink,createPlaylist:createPlaylist})})]});};export default Home;// Make website offline compatible as seen in: https://www.youtube.com/watch?v=cmGr0RszHc8\n// Put different font (lighter) for input placeholders\n// Handle user clicking enter when searching (use form better)\n// Implement refresh tokens\n// Mobile styling","map":{"version":3,"names":["useEffect","useContext","useNavigate","styles","Searchbar","AppContext","parseSetlistLink","getNowTime","Home","setPlaylistID","setPlaylistLink","setUnfoundSongs","setCoverSongs","setCreatingPlaylist","playlistName","setPlaylistName","playlistDescription","setPlaylistDescription","setAuthenticated","setAuthenticating","setSetlistError","authError","setAuthError","accessToken","refreshToken","redirectURL","regex","RegExp","TOKEN","navigate","checkForAccessToken","onPageLoad","access","localStorage","getItem","accessJSON","JSON","parse","expiry","value","checkAccessTokenExists","requestAuthLink","fetch","data","json","url","auth","window","location","href","search","length","handleRedirect","verifyAuthorisation","code","getCode","fetchAccessToken","queryString","urlParams","URLSearchParams","error","get","query1","query2","query","callAuthorizationApi","body","xhr","XMLHttpRequest","open","setRequestHeader","btoa","send","onload","handleAuthorizationResponse","status","responseText","access_token","refresh_token","expires_in","storeAccessToken","console","log","key","setItem","stringify","clearPlaylistData","makePlaylistData","setlist","playlistID","playlistLink","unfoundSongs","coverSongs","removeErrors","createPlaylist","test","setlistID","method","headers","name","description","ok","home","header","underline","searchbar"],"sources":["/Users/frank/code/TOP/repos/sites/setlist/client/src/views/home.js"],"sourcesContent":["import { useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport styles from '../styles/home.module.css';\nimport Searchbar from '../components/searchbar/searchbar';\nimport { AppContext } from '../App.js';\nimport { parseSetlistLink, getNowTime } from '../methods/methods.js'\n\nconst Home = () => {\n\n  const { setPlaylistID, setPlaylistLink, setUnfoundSongs, setCoverSongs, setCreatingPlaylist, playlistName, setPlaylistName, playlistDescription, setPlaylistDescription, setAuthenticated, setAuthenticating, setSetlistError, authError, setAuthError } = useContext(AppContext);\n\n  let accessToken;\n  let refreshToken;\n\n  const redirectURL = 'http://localhost:3000';\n  const regex = new RegExp('.*setlist\\.fm.*');\n\n  const TOKEN = \"https://accounts.spotify.com/api/token\";\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    checkForAccessToken();\n    onPageLoad();\n  }, [])\n\n  function checkForAccessToken() {\n    const access = localStorage.getItem('access');\n    if (access === null) return setAuthenticated(false);\n\n    const accessJSON = JSON.parse(access);\n    if (accessJSON.expiry > getNowTime()) {\n      accessToken = accessJSON.value;\n      setAuthenticated(true);\n    } else {\n      setAuthenticated(false);\n    }\n  }\n\n  function checkAccessTokenExists() {\n    const access = localStorage.getItem('access');\n    // If accessToken not stored, return false\n    if (access === null) {\n      setAuthenticated(false)\n      return false;\n    }\n    // Parse object in localStorage to JSON\n    const accessJSON = JSON.parse(access);\n    // If accessToken has expired, return false\n    if (accessJSON.expiry < getNowTime()) {\n      setAuthenticated(false);\n      return false;\n    }\n    // If accessToken value is falsy, return false\n    if (!accessJSON.value) {\n      setAuthenticated(false);\n      return false;\n    }\n    // If above conditions not met, accessToken is valid. Set it and return true\n    accessToken = accessJSON.value;\n    setAuthenticated(true);\n    return true;\n  }\n\n  async function requestAuthLink() {\n    try {\n      const data = await fetch('http://localhost:4000/auth');\n      const json = await data.json();\n      const url = json.auth;\n      window.location.href = url; // Show Spotify's authorization screen\n    } catch(error) {\n      setAuthError('Unable to connect to Spotify, please try again!');\n    }\n  }\n\n  function onPageLoad() {\n    if (window.location.search.length > 0) {\n      handleRedirect();\n    }\n  }\n\n  function handleRedirect() {\n    if (!verifyAuthorisation()) {\n      setAuthError('Spotify account not connected, please try again!');\n      setAuthenticating(false);\n      setAuthenticated(false);\n      navigate('/');\n      return;\n    }\n    setAuthError('');\n    setSetlistError('');\n    const code = getCode();\n    navigate('/');\n    setAuthenticating(true);\n    fetchAccessToken(code);\n  }\n\n  // Function to verify if user granted authorization on Spotify's auth screen.\n  function verifyAuthorisation() {\n    // Get url query\n    const queryString = window.location.search;\n    // If no query, return false\n    if (queryString.length === 0) return false;\n    const urlParams = new URLSearchParams(queryString);\n    const error = urlParams.get('error');\n    // If query contains error parameter (user didnt authorise or other error), return false\n    if (error) return false;\n    // Otherwise return true\n    return true;\n  }\n\n  function getCode() {\n    let code;\n    const queryString = window.location.search;\n    if (queryString.length > 0) {\n      const urlParams = new URLSearchParams(queryString);\n      code = urlParams.get('code');\n    }\n    return code;\n  }\n\n  async function fetchAccessToken(code) {\n    const data = await fetch('http://localhost:4000/access');\n    const json = await data.json();\n    const query1 = json.query1;\n    const query2 = json.query2;\n    const query = query1 + '&code=' + code + query2;\n    callAuthorizationApi(query);\n  }\n\n  function callAuthorizationApi(body) {\n    let xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", TOKEN, true);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.setRequestHeader('Authorization', 'Basic ' + btoa('0d453f304c284edca80fef86ba63f57c' + \":\" + 'd4a0686ea42f418a92521bd7e884d221'));\n    xhr.send(body);\n    xhr.onload = handleAuthorizationResponse;\n  }\n\n  function handleAuthorizationResponse() {\n    if (this.status === 200) {\n      var data = JSON.parse(this.responseText);\n      let access_token = data.access_token;\n      let refresh_token = data.refresh_token;\n      let expiry = data.expires_in;\n      setAuthenticated(true);\n      setAuthenticating(false);\n      storeAccessToken(access_token, expiry);\n    } else {\n      console.log('Unsucessful Response');\n      console.log(this.responseText);\n      setAuthError('Unable to connect to your Spotify account, please try again');\n    }\n  }\n\n  function storeAccessToken(key, expiry) {\n    const access = {\n      value: key,\n      expiry: getNowTime() + ((expiry - 300) * 1000)\n    }\n    localStorage.setItem('access', JSON.stringify(access));\n  }\n\n  function clearPlaylistData() {\n    setPlaylistID(); //Not instant\n    setPlaylistLink(); //Not instant\n    setUnfoundSongs(); //Not instant\n    setCoverSongs(); //Not instant\n  }\n\n  function makePlaylistData(setlist) {\n    setPlaylistID(setlist.playlistID); //Not instant\n    setPlaylistLink(setlist.playlistLink); //Not instant\n    setUnfoundSongs(setlist.unfoundSongs); //Not instant\n    setCoverSongs(setlist.coverSongs); //Not instant\n  }\n\n  function removeErrors() {\n    setAuthError('');\n    setSetlistError('');\n  }\n\n  async function createPlaylist(url) {\n    if (!url.length) return setSetlistError('No setlist link entered, please try again!');\n    if (!regex.test(url)) return setSetlistError('Not a valid setlist.fm link, please try again!')\n    if (!checkAccessTokenExists()) return setSetlistError('Your Spotify account is not connected, please try again!');\n    setCreatingPlaylist(true);\n    removeErrors();\n    const setlistID = parseSetlistLink(url);\n    try {\n      const data = await fetch('http://localhost:4000/setlist', {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          setlistID: setlistID,\n          accessToken: accessToken,\n          name: playlistName,\n          description: playlistDescription\n        })\n      })\n      if (data.ok) {\n        const json = await data.json();\n        makePlaylistData(json);\n        navigate('/playlist');\n        setPlaylistName('');\n        setPlaylistDescription('');\n        setCreatingPlaylist(false);\n      } else {\n        // Response returned but unsuccesful (playlist not created)\n        setCreatingPlaylist(false);\n        setSetlistError('Unable to create playlist, please ensure your setlist.fm link is correct and try again!');\n      }\n    } catch(error) {\n      // Unable to fetch from backend\n      setCreatingPlaylist(false);\n      setSetlistError('Unable to connect to Spotify, please try again!');\n    }\n  }\n\n  return (\n    <div className={styles.home}>\n      <div className={styles.header}>\n        <h2>Instantly create a Spotify playlist from any setlist!</h2>\n        <span> All you have to do is paste a setlist link from <a href='https://www.setlist.fm' className={styles.underline} target='_blank' rel='noopener noreferrer'>setlist.fm</a>, we look after the rest.</span>\n      </div>\n      <div className={styles.searchbar}>\n        <Searchbar requestAuthLink={requestAuthLink} createPlaylist={createPlaylist}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Home;\n\n// Make website offline compatible as seen in: https://www.youtube.com/watch?v=cmGr0RszHc8\n// Put different font (lighter) for input placeholders\n// Handle user clicking enter when searching (use form better)\n// Implement refresh tokens\n// Mobile styling\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}